<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:h="http://java.sun.com/jsf/html"
             xmlns:b="http://bootsfaces.net/ui">

    <b:panel>
        <style type="text/css">
            .ui-diagram-element {
                width:10em;
                height:3em;
                line-height:3em;
                text-align: center;
                word-break: break-all;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.8);
                border-radius: 3px;
                border: 1px solid transparent;
                background-color: #43B572;
                color: #ffffff;
            }

            .ui-diagram-element-selected {
                width:10em;
                height:3em;
                line-height:3em;
                text-align: center;
                word-break: break-all;
                box-shadow: 0 5px 10px rgba(0, 0, 0, 0.8);
                border-radius: 3px;
                border: 1px solid transparent;
                background-color: #F47B2A;
                color: #ffffff;
            }
        </style>


        <div style="z-index: 1; position: absolute;">
            <h:form>
                <b:row style="margin-left: 7px">
                    <p:commandButton icon="fa fa-plus" style="margin-right:20px;" title="Charger un element"
                              ajax="true" actionListener="#{conceptsDiagramBean.chargerNoeud()}" update="diagram"/>

                    <p:commandButton icon="fa fa-minus" style="margin-right:20px;" title="Fermer un element"
                              ajax="true" actionListener="#{conceptsDiagramBean.closeNoeud()}" update="diagram"/>
                </b:row>
            </h:form>
        </div>

        <p:diagram id="diagram" value="#{conceptsDiagramBean.model}" style="height:600px; position: relative;" />


        <p:remoteCommand name="elementClicked" actionListener="#{conceptsDiagramBean.onElementClicked}"/>

        <script type="text/javascript">
            $(document).on('click',
                    '.ui-diagram > .ui-diagram-element',
                    function (info) {
                        elementClicked([{
                                name: 'elementId',
                                value: info.target.id
                            }]);
                    });
        </script>
    </b:panel>
</ui:fragment>