<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:p="http://primefaces.org/ui"
             xmlns:b="http://bootsfaces.net/ui">

    


    <b:row>
        <b:column  span="1" offset="8" >
        </b:column>
        <!-- Actions sur l'arbre -->
        <ui:include src="/leftBodyView/globalActionsTree.xhtml" rendered="#{(currentUser.nodeUser != null) and (selectedTheso.currentIdTheso!= null)}"/>        

        <!-- affichage du graphe -->
        <b:column span="1" >
            <b:navCommandLink iconAwesome="fas fa-project-diagram" icon-size="sm" 
                  tooltip="#{langueBean.getMsg('conceptsview.view_branch_as_graph')}" tooltip-delay-show="500"
                  update="containerIndex"
                  ajax="true" style="color: #F47B2A; float: right; margin-top: 2px;"
                  action= "#{tree.showDiagram(true)}"/>                
        </b:column>        
    </b:row>

    
    <!-- Arbre du thésaurus il faut intégrer  dropRestrict="sibling" par la suite -->
    <b:row>
         <b:column span="12">
            <p:tree id="tree" value="#{tree.root}"  dynamic="true" var="nodetree" selectionMode="single"  selection="#{tree.selectedNode}"
                    style="width: auto; border: none; font-size: 12px;  min-height: 700px; max-height: 800px;overflow-y:scroll" animate="true"
                    styleClass="tree_custom" disabled="#{tree.noedSelected}" cache="#{roleOnTheso.nodePreference.tree_cache}"
                    draggable="#{tree.isDragAndDrop(currentUser.nodeUser)}" droppable="#{tree.isDragAndDrop(currentUser.nodeUser)}" 
                    widgetVar="treeWidget">
                <p:ajax event="expand"  listener="#{tree.onNodeExpand}"
                        onstart="$(document.body).css({'cursor' : 'wait'});"
                        oncomplete="$(document.body).css({'cursor' : 'default'});" />
                <p:ajax event="collapse" listener="#{tree.onNodeCollapse}" />
                
                <p:ajax event="select" listener="#{tree.onNodeSelect}" update="formRightTab indexTitle "
                        onstart="$(document.body).css({'cursor' : 'wait'});"
                        oncomplete="$(document.body).css({'cursor' : 'default'});"/>

                <p:ajax event="dragdrop" listener="#{dragAndDrop.onDragDrop}" update="messageIndex tree" />
                
                
                <p:treeNode  expandedIcon="far fa-folder-open fa_custom_open" collapsedIcon="far fa-folder fa_custom_collapse" >
                    <h:outputText title="#{nodetree.nodeId}" value="#{nodetree.notation} " style="font-size: 12px; color: blue"/>
                    <h:outputText title="#{nodetree.nodeId}" value="#{nodetree.name}" style="font-size: 12px"/>
                </p:treeNode>                
                <p:treeNode type="concept" expandedIcon="far fa-folder-open fa_custom_open fa-1x" collapsedIcon="far fa-folder fa_custom_collapse fa-1x" >
                    <h:outputText title="#{nodetree.nodeId}" value="#{nodetree.notation} " style="font-size: 12px; color: blue"/>
                    <h:outputText title="#{nodetree.nodeId}" value="#{nodetree.name}" style="font-size: 12px"/>
                </p:treeNode>
                <p:treeNode type="file" icon="far fa-file fa_custom_file">
                    <h:outputText title="#{nodetree.nodeId}" value="#{nodetree.notation} " style="font-size: 12px; color: blue"/>
                    <h:outputText title="#{nodetree.nodeId}" value="#{nodetree.name}"  style="font-size: 12px"/>
                </p:treeNode>   
                <p:treeNode type="facet" icon="fas fa-magnet fa_custom_magnet fas-1x">
                    <h:outputText title="#{nodetree.nodeId}" value="#{nodetree.name}" style="font-size: 12px"/>
                </p:treeNode>
            </p:tree>
        </b:column>
    </b:row>


</ui:fragment>