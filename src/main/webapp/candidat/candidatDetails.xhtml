<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:b="http://bootsfaces.net/ui"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <b:row>
        <b:column>
            <h:outputText style="font-weight: bold; background-color: #FAFAFA; margin-top: 10px;" 
                          value="#{langueBean.getMsg('candidat.file')}"/>
        </b:column>
    </b:row>

    <b:row style="margin-top: 10px">  
        <b:column>
            <h:outputText value="#{langueBean.getMsg('candidat.title')}"/>
        </b:column>
        <b:column>
            <p:inputText value="#{candidatBean.candidatSelected.nomPref}"
                         style="width: 230px; font-size: 13px; background: white;" />
        </b:column>

        <b:column style="margin-top: 15px;">
            <h:outputText value="#{langueBean.getMsg('candidat.domaine')}"/>
        </b:column>
        <b:column style="width: 100%;">
            <p:autoComplete value="#{candidatBean.candidatSelected.domaine}" style="width: 100%; "
                            completeMethod="#{candidatBean.searchDomaineName}" scrollHeight="150"/>
        </b:column>

        <b:column style="margin-top: 15px;">
            <h:outputText value="#{langueBean.getMsg('candidat.generic_term')}" />
        </b:column>
        <b:column>
            <p:autoComplete value="#{candidatBean.candidatSelected.termesGenerique}" multiple="true"
                            completeMethod="#{candidatBean.searchTerme}"/>
        </b:column>

        <b:column style="margin-top: 15px;">
            <h:outputText value="#{langueBean.getMsg('candidat.associeted_terms')}" style="margin-top: 15px;"/>
        </b:column>
        <b:column>
            <p:autoComplete value="#{candidatBean.candidatSelected.termesAssocies}" multiple="true" 
                            completeMethod="#{candidatBean.searchTerme}"/>
        </b:column>

        <b:column style="margin-top: 15px">
            <h:outputText value="#{langueBean.getMsg('candidat.used_for')}" style="margin-top: 15px;"/>
        </b:column>
        <b:column>
            <p:autoComplete value="#{candidatBean.candidatSelected.employePour}" multiple="true" 
                            completeMethod="#{candidatBean.searchTerme}"/>
        </b:column>

        <b:column style="margin-top: 15px">
            <h:outputText value="#{langueBean.getMsg('candidat.definition')}" style="margin-top: 15px;"/>
        </b:column>
        <b:column>
            <h:form id="listDefinitionsForm">
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 2px"/>
                <b:row rendered="#{candidatBean.candidatSelected.defenitions == null ||
                                   candidatBean.candidatSelected.defenitions.size() == 0}">
                    <b:column>
                        <h:outputText value="Aucune définition existe pour le moment ..." style="font-size: 12px; color: grey; font-style: italic " />
                    </b:column>
                </b:row>
                <b:row rendered="#{candidatBean.candidatSelected.defenitions.size() > 0}">
                    <b:column>
                        <ui:repeat id="listdefinitions" var="def" value="#{candidatBean.candidatSelected.defenitions}" >
                            <b:row style="font-size: 12px; padding-top: 5px; background-color: #{
                                   viewEditionBean.getAlternateColor(candidatBean.candidatSelected.defenitions.indexOf(def))}"
                                   rendered="#{candidatBean.candidatSelected.defenitions.size() > 0}">
                                <b:column span="10" >
                                    <h:outputText value="#{def}" style="width: 100%; resize: none; font-size: 13px;"/>
                                </b:column>
                                <b:column span="1">
                                    <b:navCommandLink iconAwesome="fa-pencil-alt" icon-size="lg"
                                                      oncomplete="PF('editDefinition').show();" style="color: #f47b2a;"
                                                      actionListener="#{definitionBean.init(def)}"
                                                      styleClass="buttonIconOrange" ajax="false"
                                                      update="idEditDefinition editDefinitionForm"/>
                                </b:column>
                                <b:column span="1">
                                    <b:navCommandLink iconAwesome="fas fa-trash-alt" icon-size="lg" 
                                                      styleClass="buttonIconOrange" style="color: #f47b2a;"
                                                      actionListener="#{definitionBean.init(def)}"
                                                      oncomplete="PF('confirmDeleteDefinition').show();"
                                                      update="idConfirmDeleteDefinition confirmDeleteDefinitionForm messageIndex"/>
                                </b:column>                        
                            </b:row>   
                        </ui:repeat>
                    </b:column>
                </b:row>
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 2px"/> 
                <b:row>
                    <b:column>
                        <b:navCommandLink value="Ajouter une nouvelle définition"
                                          oncomplete="PF('newDefinition').show();" ajax="false"
                                          styleClass="buttonIconOrange" style="color: #f47b2a"
                                          actionListener="#{definitionBean.init()}"
                                          update="idNewDefinition newDefinitionForm messageIndex"/>
                    </b:column>
                </b:row>
            </h:form>
        </b:column>

        <b:column style="margin-top: 15px;">
            <h:outputText value="#{langueBean.getMsg('candidat.application_note')}" style="margin-top: 15px;"/>
        </b:column>
        <b:column>
            <b:inputTextarea value="#{candidatBean.candidatSelected.noteApplication}"
                             style="width: 100%; resize: none; font-size: 13px; background: white;"/>
        </b:column>
    </b:row>

    <b:row>
        <b:column>
            <h:outputText value="#{langueBean.getMsg('candidat.traductions')}" style="margin-top: 15px;"/>
        </b:column>
        <b:column span="12" style="margin-top: 5px">
            <h:form id="listTraductionForm">
                <b:row style="font-size: 12px;  color: #666666">
                    <b:column span="4">
                        <h:outputText value="#{langueBean.getMsg('candidat.language')}"/>
                    </b:column>
                    <b:column span="4">
                        <h:outputText value="#{langueBean.getMsg('candidat.traduction')}"/>
                    </b:column>
                    <b:column span="2">
                        <h:outputText value="#{langueBean.getMsg('candidat.edit')}"/>
                    </b:column> 
                    <b:column span="2">
                        <h:outputText value="#{langueBean.getMsg('candidat.remove')}"/>
                    </b:column>                         
                </b:row>
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 2px"/>
                <b:row rendered="#{candidatBean.candidatSelected.traductions.size() == 0}">
                    <b:column>
                        <h:outputText  value="Aucune traduction existe pour le moment ..." style="font-size: 12px; color: grey; font-style: italic " />
                    </b:column>
                </b:row>
                <ui:repeat id="listTraduction" var="traduction" value="#{candidatBean.candidatSelected.traductions}">
                    <b:row style="font-size: 12px; background-color: #{viewEditionBean.getAlternateColor(candidatBean.
                                                                       candidatSelected.traductions.indexOf(traduction))}; padding-top: 5px"
                           rendered="#{candidatBean.candidatSelected.traductions.size() > 0}">
                        <b:column span="4" >
                            <h:outputText value="#{traduction.langue}"/>
                        </b:column>
                        <b:column span="4" >
                            <h:outputText value="#{traduction.traduction}"/>
                        </b:column>
                        <b:column span="2">
                            <b:navCommandLink iconAwesome="fa-pencil-alt" icon-size="lg"
                                              oncomplete="PF('editTraduction').show();" style="color: #f47b2a;"
                                              actionListener="#{traductionService.init(traduction)}"
                                              styleClass="buttonIconOrange" ajax="false"
                                              update="idEditTraduction editTraductionForm"/>     
                        </b:column>

                        <b:column span="2">
                            <b:navCommandLink iconAwesome="fas fa-trash-alt" icon-size="lg" 
                                              styleClass="buttonIconOrange" style="color: #f47b2a;"
                                              actionListener="#{traductionService.init(traduction)}"
                                              oncomplete="PF('confirmDeleteTraduction').show();" 
                                              update="idConfirmDelete confirmDeleteForm"/>
                        </b:column>                         
                    </b:row>   
                </ui:repeat>
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 2px"/> 
                <b:row>
                    <b:column>
                        <b:navCommandLink value="Ajouter une nouvelle traduction"
                                          oncomplete="PF('newTraduction').show();" ajax="false"
                                          styleClass="buttonIconOrange" style="color: #f47b2a"
                                          actionListener="#{traductionService.init()}"
                                          update="idNewTraduction newTraductionForm messageIndex"/>
                    </b:column>
                </b:row>
            </h:form>
        </b:column>
    </b:row>  

    <b:row style="margin-top: 15px;">
        <b:column>
            <h:outputText value="#{langueBean.getMsg('candidat.corpus_bound')}"/>
        </b:column>
        <b:column span="12" style="margin-top: 5px">
            <h:form id="listCorpusForm">
                <b:row style="font-size: 12px;  color: #666666">
                    <b:column span="4">
                        <h:outputText value="#{langueBean.getMsg('candidat.value')}"/>
                    </b:column>
                    <b:column span="4">
                        <h:outputText value="#{langueBean.getMsg('candidat.url')}"/>
                    </b:column>
                    <b:column span="2">
                        <h:outputText value="#{langueBean.getMsg('candidat.edit')}"/>
                    </b:column> 
                    <b:column span="2">
                        <h:outputText value="#{langueBean.getMsg('candidat.remove')}"/>
                    </b:column>                         
                </b:row>
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 2px"/>
                <b:row rendered="#{candidatBean.candidatSelected.corpus.size() == 0}">
                    <b:column>
                        <h:outputText  value="Aucun corpus n'est disponible ..." style="font-size: 12px; color: grey; font-style: italic " />
                    </b:column>
                </b:row>
                <ui:repeat id="listCorpus" var="carpus" value="#{candidatBean.candidatSelected.corpus}">
                    <b:row style="font-size: 12px; background-color: #{viewEditionBean.getAlternateColor(
                                                                       candidatBean.candidatSelected.corpus.indexOf(carpus))}; padding-top: 5px"
                           rendered="#{candidatBean.candidatSelected.corpus.size() > 0}">
                        <b:column span="4" >
                            <h:outputText value="#{carpus.value}"/>
                        </b:column>
                        <b:column span="4" >
                            <h:outputText value="#{carpus.url}"/>
                        </b:column>
                        <b:column span="2">
                            <b:navCommandLink iconAwesome="fa-pencil-alt" icon-size="lg"
                                              oncomplete="PF('editCorpus').show();" style="color: #f47b2a;"
                                              actionListener="#{corpusService.init(carpus)}"
                                              styleClass="buttonIconOrange" ajax="false"
                                              update="idEditCorpus editCorpusForm"/>     
                        </b:column>
                        <b:column span="2">
                            <b:navCommandLink iconAwesome="fas fa-trash-alt" icon-size="lg" 
                                              styleClass="buttonIconOrange" style="color: #f47b2a;"
                                              actionListener="#{corpusService.init(carpus)}"
                                              oncomplete="PF('confirmDeleteCorpus').show();" 
                                              update="idCorpusDelete corpusDeleteForm"/>
                        </b:column>                         
                    </b:row>   
                </ui:repeat>
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 2px"/> 
                <b:row>
                    <b:column>
                        <b:navCommandLink value="Ajouter une nouvelle corpus"
                                          oncomplete="PF('newCorpus').show();" ajax="false"
                                          styleClass="buttonIconOrange" style="color: #f47b2a"
                                          actionListener="#{corpusService.init()}"
                                          update="idNewCorpus newCorpusForm"/>
                    </b:column>
                </b:row>
            </h:form>
        </b:column>
    </b:row>

    <b:row style="margin-top: 15px;">
        <b:column>
            <h:outputText value="Alignement"/>
        </b:column>
        <b:column span="12" style="margin-top: 5px">
            <h:form id="alignementForm">
                <b:row style="font-size: 12px;  color: #666666">
                    <b:column span="3">
                        <h:outputText value="#{langueBean.getMsg('candidat.value')}"/>
                    </b:column>
                    <b:column span="9">
                        <h:outputText value="URL"/>
                    </b:column>
                </b:row>
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 2px"/>
                <b:row rendered="#{conceptView.nodeConcept.nodeAlignments == null || conceptView.nodeConcept.nodeAlignments.size() == 0}">
                    <b:column>
                        <h:outputText value="Aucun alignement existe pour le moment ..." 
                                      style="font-size: 12px; color: grey; font-style: italic " />
                    </b:column>
                </b:row>
                <ui:repeat id="listAlignements" var="allignement" value="#{conceptView.nodeConcept.nodeAlignments}">
                    <b:row rendered="#{conceptView.nodeConcept.nodeAlignments.size() != 0}"
                           style="font-size: 12px; background-color: #{viewEditionBean.getAlternateColor(conceptView.nodeConcept
                                                                       .nodeAlignments.indexOf(carpus))}; padding-top: 5px">
                        <b:column span="3" >
                            <h:outputText value="#{allignement.alignmentLabelType}"/>
                        </b:column>
                        <b:column span="9" >
                            <b:link href="#{allignement.uri_target}" value="#{allignement.uri_target}"
                                    tooltip="#{allignement.thesaurus_target}" tooltip-delay-show="1000" target="_blank"
                                    icon="link" icon-size="sm" style="font-size: 12px; color: #43B572;"/>
                        </b:column>
                    </b:row>
                </ui:repeat>
                <p:separator styleClass="separator" style="margin-top: 2px; margin-bottom: 2px"/>
                <b:row>
                    <b:column>
                        <b:dropMenu icon-awesome="fas fa-cog" icon-size="s"  value="" iconAlign="right"
                                    style="color: #F7A269; background: none; border: none; box-shadow: none; font-size: 12px;">
                            <b:navCommandLink value="Ajouter alignement auto"
                                              actionListener="#{alignmentBean.initAlignementByStep(selectedTheso.currentIdTheso,
                                                                candidatBean.candidatSelected.idConcept, candidatBean.languageBean.idLangue)}"
                                              action="#{alignmentBean.nextTen(candidatBean.languageBean.idLangue, selectedTheso.currentIdTheso)}"
                                              oncomplete="PF('addAlignment').show();" update="candidatForm alignementForm" style="font-size: 12px;"/>

                            <b:navCommandLink value="Ajouter alignement manuel" actionListener="#{alignmentManualBean.reset()}"
                                              oncomplete="PF('addManualAlignment').show();" update="candidatForm"
                                              style="font-size: 12px;"/>

                            <b:navCommandLink value="Modifier l'alignement" action="#{alignmentManualBean.reset()}"
                                              oncomplete="PF('updateAlignment').show();" update="candidatForm"
                                              style="font-size: 12px;"/>

                            <b:navCommandLink value="supprimer alignement"
                                              actionListener="#{alignmentBean.initAlignementByStep(selectedTheso.currentIdTheso,
                                                                candidatBean.candidatSelected.idConcept, candidatBean.languageBean.idLangue)}"
                                              action="#{alignmentManualBean.reset()}" oncomplete="PF('deleteAlignment').show();"
                                              update="candidatForm" style="font-size: 12px;"/>
                        </b:dropMenu>
                    </b:column>
                </b:row>
            </h:form>
        </b:column>
    </b:row>

    <b:row style="margin-top: 20px; margin-left: 10px;">
        <b:commandButton value="#{langueBean.getMsg('candidat.save')}" style="background: #43B572; color: white; margin-left: 5px"
                         look="primary" size="sm" actionListener="#{candidatBean.saveConcept()}" />
    </b:row>

</ui:fragment>