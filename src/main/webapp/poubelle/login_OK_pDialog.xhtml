<ui:fragment xmlns="http://www.w3.org/1999/xhtml"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:b="http://bootsfaces.net/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core"
             xmlns:p="http://primefaces.org/ui"
             xmlns:h="http://xmlns.jcp.org/jsf/html">


    <script type="text/javascript">
        function handleLoginRequest(args) {
            if (!args.loggedIn) {
                PF('loginDialog').jq.effect("shake", {times: 5}, 100);
            } else {
                PF('loginDialog').hide();
                $('#loginLink').fadeOut();
            }
        }
    </script>    


    <p:dialog id="idLoginDialog" header="Login" widgetVar="loginDialog" resizable="false" position="top"
              modal="true" width="500"
              style="font-size: 12px; margin-top: 150px;"  >

        <h:form id="loginForm">
            <b:row >
                <b:column span="6" >
                    <b:row >
                        <b:column span="1" offset="1" style="margin-top: 10px;margin-right: -10px;" >
                            <b:iconAwesome value="user"  style="color: #43B572; " fixedWidth="true"/>                            
                        </b:column>
                        <b:column span="9" >
                            <b:inputText placeholder="Username" id="username" value="#{currentUser.username}"
                                         required="true" style="font-size: 12px;">
                                                        <f:facet name="prepend">
                            <b:icon name="user" style="color: #43B572"/>
                        </f:facet>
                                
                            </b:inputText>
                        </b:column>
                    </b:row>
                    <b:row >
                        <b:column span="1" offset="1" style="margin-top: 10px;margin-right: -10px;">
                            <b:iconAwesome value="key" style="color: #43B572"/>                            
                        </b:column>
                        <b:column span="9" >                         
                            <b:inputSecret placeholder="Password" id="password" value="#{currentUser.password}"
                                           required="true" style="font-size: 12px;">
                                                        <f:facet name="prepend">
                            <b:iconAwesome name="key" style="color: #43B572"/>
                        </f:facet>
                            </b:inputSecret>
                        </b:column>
                    </b:row>                    
                </b:column>

                <b:column span="6" >
                    <p:messages id="messageLogin" showDetail="false" closable="true">
                        <p:autoUpdate />
                    </p:messages>
                </b:column>
            </b:row>

            <b:row style="margin-bottom: 20px;">
                <b:column span="5" offset="1" >
                    <p:commandButton id="buttonLogin" value="login" update="loginForm"
                                     class="btn btn-primary"
                                     action="#{currentUser.login()}" 
                                     oncomplete="handleLoginRequest(args)"
                                     style="width:100%; font-size: 13px; 
                                     font-weight: normal;
                                     color: white; background: #43B572; border: none; box-shadow: none; "/>
                </b:column>
                <b:column span="5">
                    <p:commandButton value="password forgotten" action="#{currentUser.forgotPassword()}"
                                     class="btn btn-primary"
                                     style="width:100%; font-size: 13px; 
                                     font-weight: normal;
                                     color: white; background: #C63632; border: none; box-shadow: none; "/>
                </b:column>
            </b:row>    
        </h:form>

    </p:dialog>    
</ui:fragment>