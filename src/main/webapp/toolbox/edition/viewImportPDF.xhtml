<ui:fragment xmlns="http://www.w3.org/1999/xhtml"
             xmlns:h="http://java.sun.com/jsf/html"  
             xmlns:ui="http://java.sun.com/jsf/facelets"
             xmlns:b="http://bootsfaces.net/ui"
             xmlns:p="http://primefaces.org/ui"
             xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:panelGroup id="viewImportPDFForm">

        <b:row>
            <b:column span="3" style="margin-bottom: 10px">
                <h:outputText value="#{langueBean.getMsg('popup.exp')} : " styleClass="styleText2" /> 
            </b:column>
            <b:column span="9">
                <h:outputText value="#{exportBean.idTheso}" styleClass="textInfo"/>
            </b:column>
        </b:row>

        <b:row style="margin-bottom: 10px" rendered="#{exportBean.isPdfExport()}">
            <b:column span="3">
                <p:outputLabel for="idTypeExportPdf" value="#{langueBean.getMsg('export.type')} :" /> 
            </b:column>
            <b:column span="9">
                <p:selectOneMenu id="idTypeExportPdf" value="#{exportBean.exportFormat}">
                    <f:selectItem itemLabel="Hiérarchique" itemValue="0" />
                    <f:selectItem itemLabel="Alphabétique" itemValue="1" />
                </p:selectOneMenu>
            </b:column>
        </b:row>

        <b:row style="margin-bottom: 10px">
            <b:column span="3">
                <p:outputLabel for="idLangExport" value="#{langueBean.getMsg('export.langOfTheso')} :" />    
            </b:column>
            <b:column span="9">
                <p:selectOneMenu id="idLangExport" value="#{exportBean.singleLanguageCodeSelected}">
                    <f:selectItems value="#{exportBean.getCodesLanguagesOfTheso()}"/>
                </p:selectOneMenu>
            </b:column>
        </b:row>

        <b:row style="margin-bottom: 10px">
            <b:column span="3">
                <p:outputLabel for="idLang2Export" value="#{langueBean.getMsg('export.langOfTheso')} 2 :" />       
            </b:column>
            <b:column span="9">
                <p:selectOneMenu id="idLang2Export" value="#{exportBean.singleLanguageCodeSelected2}">
                    <f:selectItem itemLabel="None" itemValue="" />
                    <f:selectItems value="#{exportBean.getCodesLanguagesOfTheso()}"/>
                </p:selectOneMenu>
            </b:column>
        </b:row>

        <b:row style="margin-bottom: 10px" rendered="#{exportBean.isPdfExport()}">
            <b:column span="3">
                <h:outputText value="#{langueBean.getMsg('stat.statTheso1')}" styleClass="textInfoSmall" />  
            </b:column>
            <b:column span="9">
                <p:accordionPanel styleClass="accordionMenu" activeIndex="-2">
                    <p:tab title="..."    titleStyleClass="titleAccordion">
                        <p:dataTable var="groupOfTheso" value="#{exportBean.groupList}" style="width:300px;margin-bottom:0"
                                     selection="#{exportBean.selectedGroups}" rowKey="#{groupOfTheso.conceptGroup.idgroup}">

                            <p:column selectionMode="multiple" style="width:16px;text-align:center"/>

                            <p:column headerText="Id" width="30" styleClass="styleText2">
                                <h:outputText value="#{groupOfTheso.conceptGroup.idgroup}" />
                            </p:column>

                            <p:column headerText="Group" styleClass="styleText2">
                                <h:outputText value="#{groupOfTheso.lexicalValue}" styleClass="styleText2"/>
                            </p:column>

                        </p:dataTable>                    
                    </p:tab>
                </p:accordionPanel>
            </b:column>
        </b:row>

        <br /><br />
        <b:row >
            <b:column span="6">
                <p:commandButton value="#{exportBean.getExportButtonLabel()}" widgetVar="exportButton" icon="ui-icon-valider" ajax="false" 
                                 class="btn btn-success" style="float: right; font-size: 13px; color: white; background: #43B572; border: #43B572;"
                                 onclick="PF('pbAjax').start();PF('pbAjax').show()" update="viewImportPDFForm" > 
                    
                    <p:fileDownload value="#{exportFileBean.exportThesorus(exportBean.idTheso,exportBean.selectedLanguages, 
                                             exportBean.selectedGroups,exportBean.singleLanguageCodeSelected,
                                             exportBean.singleLanguageCodeSelected2,exportBean.exportFormat, exportBean.format)}" />  
                    
                </p:commandButton>     
            </b:column>
            
            <b:column span="6">
                <p:commandButton icon="fas fa-undo" value="#{langueBean.getMsg('btnBack')}" class="btn btn-success"
                                 style="font-size: 13px; color: white; background: #FFC107; border: #FFC107;"
                                 actionListener="#{viewEditionBean.init()}" action="#{importFileBean.init()}"
                                 update="toolBoxForm toolBoxForm:listThesoForm"/>
            </b:column>
        </b:row>

        <br/><br/>
        
        <p:progressBar widgetVar="pbAjax" ajax="true" value="#{progressBarView.progress}" labelTemplate="{value}%" 
                       styleClass="animated" global="false" 
                       style="font-size: 13px; color: white; background: #43B572; border: #43B572;"/>

    </h:panelGroup>

</ui:fragment>